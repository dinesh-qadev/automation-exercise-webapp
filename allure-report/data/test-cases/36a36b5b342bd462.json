{"uid":"36a36b5b342bd462","name":"Search Products and Verify Cart After Login","fullName":"testCases.test_020_search_products_and_verify_cart_after_login#test_search_products_and_verify_cart_after_login","historyId":"d9f3acb1e8b5f7d51dcda027c0949608","time":{"start":1748749524111,"stop":1748749530596,"duration":6485},"description":"Verify searched products are added to cart and persist after user login.","descriptionHtml":"<p>Verify searched products are added to cart and persist after user login.</p>\n","status":"failed","statusMessage":"AssertionError: Product 1 price/quantity/total is incorrect\nassert False\n +  where False = verify_product_details(2, 'Rs. 400')\n +    where verify_product_details = <pageObjects.cart_page.CartPage object at 0x7f9de546b5d0>.verify_product_details","statusTrace":"browser = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"d5093f9270f2d2d477d53eb6feac2405\")>\n\n    @allure.feature(\"Cart\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    @allure.title(\"Search Products and Verify Cart After Login\")\n    @allure.description(\"Verify searched products are added to cart and persist after user login.\")\n    def test_search_products_and_verify_cart_after_login(browser):\n        home = HomePage(browser)\n        products = ProductsPage(browser)\n        cart = CartPage(browser)\n        signup_login = SignupLoginPage(browser)\n    \n        # 3. Click on 'Products' button\n        home.click_products()\n    \n        # 4. Verify user is navigated to ALL PRODUCTS page successfully\n        assert products.is_all_products_page_displayed(), \"All Products page not visible\"\n    \n        # 5. Enter product name in search input and click search button\n        product_info = load_test_data(\"products.json\")  # Test Data initialized\n        search_data = product_info[\"search\"]\n    \n        product_name = search_data[\"product_search\"]  # Fetched product name from json\n        products.enter_search_text(product_name)\n        products.click_search_button()\n    \n        # 6. Verify 'SEARCHED PRODUCTS' is visible\n        assert products.is_searched_products_section_visible(), \"Searched Products section not visible\"\n    \n        # 7. Verify all the products related to search are visible\n        assert products.are_search_results_visible(product_name), f\"Search results for '{product_name}' are not displayed correctly\"\n    \n        # 8. Add those products to cart: for faster test we are only adding two products to cart\n        product_1_name, product_1_price = products.hover_and_add_to_cart_and_get_price(1) # over and add first product to cart, capture price\n    \n        print(product_1_name)\n        products.click_continue_shopping()\n        product_2_name, product_2_price = products.hover_and_add_to_cart_and_get_price(2) # Hover and add second product to cart, capture price\n    \n        added_products = [product_1_name, product_2_name]\n        # 9. Click 'Cart' button and verify that products are visible in cart\n        products.click_view_cart()\n    \n        assert cart.are_products_in_cart(added_products), \"First product not found in cart\"  # Verify Product-1 is on cart\n        #assert cart.are_products_in_cart(product_2_name), \"Second product not found in cart\"  # Verify Product-2 is on cart\n    \n        assert cart.verify_product_details(1, product_1_price), \"Product 1 price/quantity/total is incorrect\"  # Verify Product-1 details is correct on cart\n        assert cart.verify_product_details(2, product_2_price), \"Product 2 price/quantity/total is incorrect\"  # Verify Product-1 details is correct on cart\n    \n        # 10. Click 'Signup / Login' button and submit login details\n        home.click_signup_login()\n        user_info = load_test_data(\"users.json\")  # Test data loaded from json file\n        correct_credential = user_info[\"valid_user\"]\n        signup_login.login_user(\n            email=correct_credential[\"email\"],\n            password=correct_credential[\"password\"])\n    \n        # 11. Again, go to Cart page\n        home.click_cart_button()\n    \n        # 12. Verify that those products are visible in cart after login as well\n        assert cart.are_products_in_cart(added_products), \"Products are not found in cart\"  # Verify Product is on cart\n        #assert cart.are_products_in_cart(product_2_name), \"Second product not found in cart\"  # Verify Product-2 is on cart\n    \n>       assert cart.verify_product_details(2,\n                                           product_1_price), \"Product 1 price/quantity/total is incorrect\"  # Verify Product-1 details is correct on cart\nE       AssertionError: Product 1 price/quantity/total is incorrect\nE       assert False\nE        +  where False = verify_product_details(2, 'Rs. 400')\nE        +    where verify_product_details = <pageObjects.cart_page.CartPage object at 0x7f9de546b5d0>.verify_product_details\n\ntestCases/test_020_search_products_and_verify_cart_after_login.py:71: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"config","time":{"start":1748749395814,"stop":1748749395814,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"browser","time":{"start":1748749522497,"stop":1748749524110,"duration":1613},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"testStage":{"description":"Verify searched products are added to cart and persist after user login.","status":"failed","statusMessage":"AssertionError: Product 1 price/quantity/total is incorrect\nassert False\n +  where False = verify_product_details(2, 'Rs. 400')\n +    where verify_product_details = <pageObjects.cart_page.CartPage object at 0x7f9de546b5d0>.verify_product_details","statusTrace":"browser = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"d5093f9270f2d2d477d53eb6feac2405\")>\n\n    @allure.feature(\"Cart\")\n    @allure.severity(allure.severity_level.CRITICAL)\n    @allure.title(\"Search Products and Verify Cart After Login\")\n    @allure.description(\"Verify searched products are added to cart and persist after user login.\")\n    def test_search_products_and_verify_cart_after_login(browser):\n        home = HomePage(browser)\n        products = ProductsPage(browser)\n        cart = CartPage(browser)\n        signup_login = SignupLoginPage(browser)\n    \n        # 3. Click on 'Products' button\n        home.click_products()\n    \n        # 4. Verify user is navigated to ALL PRODUCTS page successfully\n        assert products.is_all_products_page_displayed(), \"All Products page not visible\"\n    \n        # 5. Enter product name in search input and click search button\n        product_info = load_test_data(\"products.json\")  # Test Data initialized\n        search_data = product_info[\"search\"]\n    \n        product_name = search_data[\"product_search\"]  # Fetched product name from json\n        products.enter_search_text(product_name)\n        products.click_search_button()\n    \n        # 6. Verify 'SEARCHED PRODUCTS' is visible\n        assert products.is_searched_products_section_visible(), \"Searched Products section not visible\"\n    \n        # 7. Verify all the products related to search are visible\n        assert products.are_search_results_visible(product_name), f\"Search results for '{product_name}' are not displayed correctly\"\n    \n        # 8. Add those products to cart: for faster test we are only adding two products to cart\n        product_1_name, product_1_price = products.hover_and_add_to_cart_and_get_price(1) # over and add first product to cart, capture price\n    \n        print(product_1_name)\n        products.click_continue_shopping()\n        product_2_name, product_2_price = products.hover_and_add_to_cart_and_get_price(2) # Hover and add second product to cart, capture price\n    \n        added_products = [product_1_name, product_2_name]\n        # 9. Click 'Cart' button and verify that products are visible in cart\n        products.click_view_cart()\n    \n        assert cart.are_products_in_cart(added_products), \"First product not found in cart\"  # Verify Product-1 is on cart\n        #assert cart.are_products_in_cart(product_2_name), \"Second product not found in cart\"  # Verify Product-2 is on cart\n    \n        assert cart.verify_product_details(1, product_1_price), \"Product 1 price/quantity/total is incorrect\"  # Verify Product-1 details is correct on cart\n        assert cart.verify_product_details(2, product_2_price), \"Product 2 price/quantity/total is incorrect\"  # Verify Product-1 details is correct on cart\n    \n        # 10. Click 'Signup / Login' button and submit login details\n        home.click_signup_login()\n        user_info = load_test_data(\"users.json\")  # Test data loaded from json file\n        correct_credential = user_info[\"valid_user\"]\n        signup_login.login_user(\n            email=correct_credential[\"email\"],\n            password=correct_credential[\"password\"])\n    \n        # 11. Again, go to Cart page\n        home.click_cart_button()\n    \n        # 12. Verify that those products are visible in cart after login as well\n        assert cart.are_products_in_cart(added_products), \"Products are not found in cart\"  # Verify Product is on cart\n        #assert cart.are_products_in_cart(product_2_name), \"Second product not found in cart\"  # Verify Product-2 is on cart\n    \n>       assert cart.verify_product_details(2,\n                                           product_1_price), \"Product 1 price/quantity/total is incorrect\"  # Verify Product-1 details is correct on cart\nE       AssertionError: Product 1 price/quantity/total is incorrect\nE       assert False\nE        +  where False = verify_product_details(2, 'Rs. 400')\nE        +    where verify_product_details = <pageObjects.cart_page.CartPage object at 0x7f9de546b5d0>.verify_product_details\n\ntestCases/test_020_search_products_and_verify_cart_after_login.py:71: AssertionError","steps":[],"attachments":[{"uid":"95991b9175b99419","name":"screenshot_on_failure","source":"95991b9175b99419.png","type":"image/png","size":107497},{"uid":"4884fd21fe273539","name":"log","source":"4884fd21fe273539.txt","type":"text/plain","size":4549},{"uid":"64cc6627cfbef5d4","name":"stdout","source":"64cc6627cfbef5d4.txt","type":"text/plain","size":297},{"uid":"6b056238f3be6370","name":"stderr","source":"6b056238f3be6370.txt","type":"text/plain","size":8470}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"browser::0","time":{"start":1748749531029,"stop":1748749531202,"duration":173},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"severity","value":"critical"},{"name":"feature","value":"Cart"},{"name":"parentSuite","value":"testCases"},{"name":"suite","value":"test_020_search_products_and_verify_cart_after_login"},{"name":"host","value":"pkrvmf6wy0o8zjz"},{"name":"thread","value":"3759-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"testCases.test_020_search_products_and_verify_cart_after_login"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"critical","retries":[{"uid":"d3fc03d47d039cd8","status":"broken","statusDetails":"selenium.common.exceptions.StaleElementReferenceException: Message: stale element reference: stale element not found\n  (Session info: chrome=136.0.7103.114); For documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#stale-element-reference-exception\nStacktrace:\n\tGetHandleVerifier [0x00D9FC03+61635]\n\tGetHandleVerifier [0x00D9FC44+61700]\n\t(No symbol) [0x00BC05D3]\n\t(No symbol) [0x00BD2061]\n\t(No symbol) [0x00BD1140]\n\t(No symbol) [0x00BC7880]\n\t(No symbol) [0x00BC795C]\n\t(No symbol) [0x00BC5D81]\n\t(No symbol) [0x00BC9335]\n\t(No symbol) [0x00C4F531]\n\t(No symbol) [0x00C2D29C]\n\t(No symbol) [0x00C4E61B]\n\t(No symbol) [0x00C2D096]\n\t(No symbol) [0x00BFC840]\n\t(No symbol) [0x00BFD6A4]\n\tGetHandleVerifier [0x01024523+2701795]\n\tGetHandleVerifier [0x0101FCA6+2683238]\n\tGetHandleVerifier [0x0103A9EE+2793134]\n\tGetHandleVerifier [0x00DB68C5+155013]\n\tGetHandleVerifier [0x00DBCFAD+181357]\n\tGetHandleVerifier [0x00DA7458+92440]\n\tGetHandleVerifier [0x00DA7600+92864]\n\tGetHandleVerifier [0x00D91FF0+5296]\n\tBaseThreadInitThunk [0x757BFCC9+25]\n\tRtlGetAppContainerNamedObjectPath [0x779782AE+286]\n\tRtlGetAppContainerNamedObjectPath [0x7797827E+238]","time":{"start":1748710618985,"stop":1748710632281,"duration":13296}}],"categories":[{"name":"Product Defects","messageRegex":".*AssertionError.*","matchedStatuses":["failed"]}],"history":{"statistic":{"failed":5,"broken":0,"skipped":0,"passed":0,"unknown":0,"total":5},"items":[{"uid":"3db2d68b9c1a8710","status":"failed","statusDetails":"AssertionError: Product 1 price/quantity/total is incorrect\nassert False\n +  where False = verify_product_details(2, 'Rs. 400')\n +    where verify_product_details = <pageObjects.cart_page.CartPage object at 0x7fa3f3e0ff90>.verify_product_details","time":{"start":1748714153358,"stop":1748714160385,"duration":7027}},{"uid":"cce254bfc61fc022","status":"failed","statusDetails":"AssertionError: Product 1 price/quantity/total is incorrect\nassert False\n +  where False = verify_product_details(2, 'Rs. 400')\n +    where verify_product_details = <pageObjects.cart_page.CartPage object at 0x7f6fdb2c4490>.verify_product_details","time":{"start":1748690697228,"stop":1748690704619,"duration":7391}},{"uid":"fbd8ecb4de23a9f8","status":"failed","statusDetails":"AssertionError: Product 1 price/quantity/total is incorrect\nassert False\n +  where False = verify_product_details(2, 'Rs. 400')\n +    where verify_product_details = <pageObjects.cart_page.CartPage object at 0x7f093a5b4610>.verify_product_details","time":{"start":1748666645848,"stop":1748666654238,"duration":8390}},{"uid":"e1c06e029c530087","status":"failed","statusDetails":"AssertionError: Product 1 price/quantity/total is incorrect\nassert False\n +  where False = verify_product_details(2, 'Rs. 400')\n +    where verify_product_details = <pageObjects.cart_page.CartPage object at 0x7f9bd500d2d0>.verify_product_details","time":{"start":1748663563960,"stop":1748663572059,"duration":8099}}]},"tags":[]},"source":"36a36b5b342bd462.json","parameterValues":[]}